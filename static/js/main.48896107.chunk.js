(this["webpackJsonpbooks-website"]=this["webpackJsonpbooks-website"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n.n(o),a=n(25),s=n.n(a),i=(n(50),n(51),n(52),n(53),n(54),n(6)),r=n(1);function l(e){var t=e.setIsMobile,n=function(e){t(e.innerWidth<768)};return c.a.useEffect((function(){return n(window),window.addEventListener("resize",(function(e){return n(e.target)})),window.removeEventListener("resize",n)}),[]),Object(r.jsx)(c.a.Fragment,{})}var j=n(12);function d(e){return Object(r.jsx)(r.Fragment,{children:e.items.map((function(e){return Object(r.jsx)("nav",{children:Object(r.jsx)(j.b,{to:e.url,className:"clear-link",children:Object(r.jsx)("button",{className:"bordered-button",style:{opacity:1},children:e.displayName})})},e.id)}))})}var b=n(87);function u(e){var t=c.a.useState(!1),n=Object(i.a)(t,2),o=n[0],a=n[1];return Object(r.jsxs)("nav",{className:"menu-mobile-container ".concat(o?"menu-mobile-container-open":""," "),children:[Object(r.jsx)(b.a,{toggled:o,toggle:a,color:"#35d77e"}),Object(r.jsx)("div",{className:"menu-mobile-body ".concat(o?"":"hidden"),children:e.items.map((function(e){return Object(r.jsx)("nav",{onClick:function(){return a(!1)},children:Object(r.jsx)(j.b,{to:e.url,className:"clear-link",children:Object(r.jsx)("button",{className:"bordered-button",style:{opacity:1},children:e.displayName})})},e.id)}))})]})}function h(e){var t=Object(o.useState)(null),n=Object(i.a)(t,2),c=n[0],a=n[1];return Object(r.jsxs)("header",{className:"container menu-container ".concat(c?"menu-container-mobile":""),children:[Object(r.jsx)(l,{setIsMobile:a}),c?Object(r.jsx)(u,{items:e.items}):Object(r.jsx)(d,{items:e.items})]})}var O=c.a.createContext();function p(e){var t=c.a.useState(!1),n=Object(i.a)(t,2),o=n[0],a=n[1];return Object(r.jsx)(O.Provider,{value:{showPopup:o,updateStatePopup:function(e){a(e)}},children:e.children})}function m(e){return Object(r.jsx)("div",{className:"popup",ref:e.lineaRef,onAnimationEnd:e.handleAnimationEnd,children:e.text})}m.defaultProps={text:"Please, specify a text"};var x=n(5),v=n(27);function f(e){return Object(r.jsx)("div",{children:Object(r.jsx)(j.b,{to:e.destination,className:"clear-link",style:{color:"white"},children:Object(r.jsxs)("button",{type:"button",className:"button goback-button",children:[Object(r.jsx)(v.a,{className:"goback-icon"}),Object(r.jsx)("span",{children:"Return to books"})]})})})}function g(e){return Object(r.jsx)("header",{children:e.drawGoBack?Object(r.jsx)(f,{destination:"/"}):""})}f.defaultProps={destination:"/"};var k=n.p+"static/media/spinner.d3911028.svg";function y(){return Object(r.jsx)("section",{className:"container",children:Object(r.jsx)("img",{className:"loader",src:k,alt:"Loading...",width:"300",height:"300"})})}var w=n(9),N=n.p+"static/media/close.c39ccb73.svg",S=n(16),I=n.n(S),E=c.a.createContext();function L(e){var t=Object(o.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(o.useState)(!0),l=Object(i.a)(s,2),j=l[0],d=l[1];return Object(o.useEffect)((function(){d(!0);var e=JSON.parse(localStorage.getItem("books"));if(e){var t=e.map((function(e){return new Promise((function(t,n){I.a.get("".concat("https://www.googleapis.com/books/v1/volumes","/").concat(e.id)).then((function(e){200!==e.status&&n(new Error("Error while getting information about the book")),t(e.data)}))}))}));Promise.all(t).then((function(e){a(e),d(!1)})).catch((function(e){console.error(e)}))}else d(!1)}),[]),Object(o.useEffect)((function(){localStorage.removeItem("books");var e=c.map((function(e){return{id:e.id}}));localStorage.setItem("books",JSON.stringify(e))}),[c]),j?Object(r.jsx)(y,{}):Object(r.jsx)(E.Provider,{value:{books:c,updateBooks:function(e){a(e)}},children:e.children})}function B(e){var t=c.a.useContext(E),n=t.books,o=t.updateBooks;return Object(r.jsx)("div",{onClick:function(){var t=n.filter((function(t){return t.id!==e.bookId}));o(t)},children:Object(r.jsx)("img",{src:N,alt:"Close",className:"icon delete-saved-book",width:"50",height:"50"})})}function C(e){var t,n,o,c,a=e.book.volumeInfo,s=a.title,i=a.imageLinks,l=a.description,j=null===(t=e.book.volumeInfo.authors)||void 0===t?void 0:t.join(", "),d=null===(n=e.book.volumeInfo.categories)||void 0===n?void 0:n.join(" "),b="";(null===(o=e.book.volumeInfo.publishedDate)||void 0===o?void 0:o.length)>0&&(b=new Date(e.book.volumeInfo.publishedDate).getFullYear());var u=null===(c=e.book.volumeInfo)||void 0===c?void 0:c.pageCount,h=null===i||void 0===i?void 0:i.thumbnail;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("header",{className:"relative-parent",children:[Object(r.jsxs)("h1",{children:[Object(r.jsx)("i",{children:"Information about"})," ",s]}),h?Object(r.jsx)("img",{src:h,alt:"Copertina"}):Object(r.jsx)("h3",{children:"No preview available"}),e.drawDeleteButton&&Object(r.jsx)(B,{bookId:e.book.id})]}),Object(r.jsx)("main",{children:Object(r.jsxs)("div",{className:"book-body",children:[Object(r.jsxs)("span",{className:"book-section",children:[Object(r.jsx)("b",{children:s})," \xe8 un libro scritto da ",j," pubblicato nel ",b,". Appartiene al genere ",Object(r.jsx)("b",{children:d})," e conta ",u," pagine"]}),l&&Object(r.jsxs)("article",{className:"book-section",children:[Object(r.jsx)("header",{children:Object(r.jsx)("h3",{className:"section-title",children:"Trama"})}),Object(r.jsx)("section",{children:Object(r.jsx)("div",{children:l})})]})]})})]})}var D=n(17),_=n(18),P=n(20),A=n(19),R=function(e){Object(P.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e,t,n=Object(r.jsx)("div",{});return n=(null===(e=this.props.saleInfo)||void 0===e||null===(t=e.listPrice)||void 0===t?void 0:t.amount)?Object(r.jsxs)("div",{className:"container book-row",children:[Object(r.jsx)("h4",{children:"Prezzo: "}),Object(r.jsxs)("span",{children:["\u20ac",this.props.saleInfo.listPrice.amount]})]}):Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("h3",{children:"No price available"})}),Object(r.jsxs)("footer",{className:"flex-container",children:[n,this.props.saleInfo.buyLink&&Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("a",{href:this.props.saleInfo.buyLink,target:"_blank",className:"link clear-link",rel:"noreferrer",children:Object(r.jsx)("span",{children:"Buy Now"})})})]})}}]),n}(o.Component);function T(e){var t=Object(o.useState)(!0),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(o.useState)({}),j=Object(i.a)(s,2),d=j[0],b=j[1],u=Object(o.useState)(null),h=Object(i.a)(u,2),O=h[0],p=h[1],m=Object(w.c)((function(e){return e.books.items}));return Object(o.useEffect)((function(){a(!0);var t=m.filter((function(t){return t.id===e.bookId}));b(t[0]),a(!1)})),d==={}||c?Object(r.jsx)(y,{}):Object(r.jsxs)("section",{className:"container book ".concat(O?"book-md":"book-lg"),children:[Object(r.jsx)(l,{setIsMobile:p}),(null===d||void 0===d?void 0:d.volumeInfo)&&Object(r.jsx)(C,{book:d,drawDeleteButton:e.drawDeleteButton}),(null===d||void 0===d?void 0:d.saleInfo)&&Object(r.jsx)(R,{saleInfo:d.saleInfo})]})}function M(e){var t,n=Object(x.f)();t=!e.drawGoBack&&null===e.drawGoBack||e.drawGoBack;var o=(null===n||void 0===n?void 0:n.id)||e.id;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(g,{drawGoBack:t,bookId:o}),Object(r.jsx)(T,{bookId:o,drawDeleteButton:e.drawDeleteButton})]})}function F(){return Object(r.jsxs)("div",{className:"flex flex-container container",style:{color:"grey"},children:[Object(r.jsx)(f,{destination:"/"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h1",{children:":/"}),Object(r.jsx)("br",{}),Object(r.jsx)("h1",{children:"Oops, qualcosa \xe8 andato storto!"}),Object(r.jsx)("br",{}),Object(r.jsx)("h3",{children:"La pagina che stai cercando di visitare non \xe8 disponibile"})]})}M.defaultProps={drawGoBack:!1};var G=n(42),H=n(3),U={getBooks:function(){return{type:"GET_BOOKS"}},setBooksInfos:function(e){return{type:"SET_BOOKS",payload:e}},setLoading:function(){return{type:"SET_LOADING"}},setOrderBy:function(e){return{type:"SET_ORDERBY",payload:e}},stopLoading:function(){return{type:"STOP_LOADING"}},updateBooks:function(e){return{type:"UPDATE_BOOKS",payload:e}}},Y=U,J={setQueryString:function(e){return{type:"SET_Q",payload:e}},clearQueryString:function(){return{type:"CLEAR_Q"}},throwSearchError:function(){return{type:"THROW_SEARCH_ERROR"}},setLastUrlCalled:function(e){return{type:"SET_LAST_URL_CALLED",payload:{url:e}}},setNumItemsDisplayed:function(e){return{type:"SET_NUM_ITEMS_DISPLAYED",payload:{count:e}}}},Q=J,q=Object(H.a)(Object(H.a)({},Y),Q);function K(){var e=Object(w.c)((function(e){return e.search})),t=e.q,n=e.isError,o=Object(w.c)((function(e){return e.books.orderBy})),c=Object(w.b)();return Object(r.jsx)("header",{className:"container searchbox-container",children:Object(r.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(r.jsxs)("div",{className:"searchbox-group",children:[Object(r.jsxs)("div",{style:{position:"absolute"},children:[Object(r.jsxs)("select",{className:"button search-orderby",defaultValue:"orderby",onChange:function(e){c(q.setOrderBy(e.target.value))},children:[Object(r.jsx)("option",{value:"orderby",disabled:!0,children:"Order by"}),Object(r.jsx)("option",{value:"newest",children:"Newest"}),Object(r.jsx)("option",{value:"relevance",children:"Relevance"})]}),Object(r.jsx)(G.a,{className:"icon-angleDown icon"})]}),Object(r.jsx)("input",{type:"text",placeholder:"Inserisci un titolo",name:"searchbox",id:"searchbox",onChange:function(e){c(q.setQueryString(e.target.value))},value:t}),Object(r.jsx)("div",{style:{position:"absolute",right:0},children:Object(r.jsx)("div",{className:"searchbox-wrapper-item",children:Object(r.jsx)("button",{type:"submit",onClick:function(){if(c(q.setLoading()),t.length>0&&!n){var e="".concat("https://www.googleapis.com/books/v1/volumes","?q=").concat(t);""!==o&&(e+="&orderBy=".concat(o)),I.a.get(e).then((function(t){if(t.data.items){c(q.setBooksInfos(t.data)),c(q.setLastUrlCalled(e));var n=t.data.items.length<10?t.data.items.length:10;c(q.setNumItemsDisplayed(n))}}))}else c(q.throwSearchError()),c(q.stopLoading())},className:"button",children:"Invia"})})})]})})})}var z=n(24),W=n(21),V=function(e){Object(P.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(D.a)(this,n),(o=t.call(this,e)).state={hoverClass:"",showSavedMsg:!1,textPopup:""},o.popupRef=c.a.createRef(),o.showHideMoreButton=o.showHideMoreButton.bind(Object(W.a)(o)),o.showPopup=o.showPopup.bind(Object(W.a)(o)),o.handleAnimationEnd=o.handleAnimationEnd.bind(Object(W.a)(o)),o}return Object(_.a)(n,[{key:"showHideMoreButton",value:function(e){this.setState({hoverClass:e?"outline-button-hover":""})}},{key:"showPopup",value:function(e){this.state.showSavedMsg||this.setState({showSavedMsg:!0,textPopup:e})}},{key:"handleAnimationEnd",value:function(){this.setState({showSavedMsg:!1})}},{key:"saveBook",value:function(e){var t=JSON.parse(localStorage.getItem("books"));t.find((function(t){return t.id===e}))?this.showPopup("Libro gi\xe0 inserito nella raccolta"):(localStorage.setItem("books",t?JSON.stringify([].concat(Object(z.a)(t),[{id:e}])):JSON.stringify([{id:e}])),this.showPopup("Libro aggiunto alla raccolta"))}},{key:"render",value:function(){var e=this;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"book book-md",onMouseOver:function(){e.showHideMoreButton(!0)},onMouseOut:function(){e.showHideMoreButton(!1)},children:[Object(r.jsx)("h3",{children:this.props.title}),Object(r.jsxs)("div",{className:"book-row",children:[Object(r.jsx)("b",{children:"Authors: "}),Object(r.jsx)("span",{children:this.props.authors})]}),Object(r.jsxs)("div",{className:"book-row",children:[Object(r.jsx)("b",{children:"Category: "}),Object(r.jsx)("span",{children:this.props.categories})]}),Object(r.jsxs)("div",{className:"book-row",children:[Object(r.jsx)("b",{children:"Published By: "}),Object(r.jsx)("span",{children:this.props.publisher})]}),Object(r.jsxs)("div",{className:"book-row",children:[Object(r.jsx)("b",{children:"Released at "}),Object(r.jsx)("span",{children:this.props.date})]}),this.state.showSavedMsg&&Object(r.jsx)(m,{lineaRef:this.popupRef,text:this.state.textPopup,handleAnimationEnd:this.handleAnimationEnd}),this.props.image&&Object(r.jsx)("div",{className:"book-row",style:{display:"inline-block"},children:Object(r.jsx)("img",{src:this.props.image,alt:this.props.title})}),Object(r.jsxs)("div",{className:"hover-buttons",children:[Object(r.jsx)(j.b,{to:"/book/".concat(this.props.id),className:"clear-link",children:Object(r.jsx)("button",{className:"outline-button ".concat(this.state.hoverClass),children:"About it"})}),Object(r.jsx)("button",{className:"outline-button clear-links ".concat(this.state.hoverClass),onClick:function(){return e.saveBook(e.props.id)},children:"Save"})]})]})})}}]),n}(o.Component),X=n(43);function Z(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=function(){window.scrollY<150?c(!1):n||c(!0)};return Object(o.useEffect)((function(){return window.addEventListener("scroll",a),function(){window.removeEventListener("scroll",a)}}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"goup",id:"goup",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},style:{opacity:n?1:0},children:Object(r.jsx)(v.b,{})})})}function $(e){var t=e.books,n=Object(w.c)((function(e){return e.search})),o=n.lastUrlCalled,c=n.showedItems,a=Object(w.b)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(X.a,{dataLength:c,next:function(){I.a.get("".concat(o,"&startIndex=").concat(c)).then((function(e){if(e.data.items){a(q.updateBooks(e.data.items));var t=c;t+=e.data.items.length<10?e.data.items.length:10,a(q.setNumItemsDisplayed(t))}}))},hasMore:!0,loader:Object(r.jsx)("h3",{className:"infinitescroll-loading",children:"Loading more books..."}),endMessage:Object(r.jsx)("p",{style:{textAlign:"center"},children:Object(r.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(r.jsx)("div",{className:"books",children:t.map((function(e){var t,n,o,c=e.volumeInfo,a=c.publisher,s=c.title,i=c.imageLinks,l=null===(t=e.volumeInfo.authors)||void 0===t?void 0:t.join(", "),j=null===(n=e.volumeInfo.categories)||void 0===n?void 0:n.join(" "),d="";(null===(o=e.volumeInfo.publishedDate)||void 0===o?void 0:o.length)>0&&(d=function(e){var t=e.getDate(),n=e.getMonth(),o=e.getHours(),c=e.getMinutes(),a=e.getFullYear();return n=n+1<10?"0".concat(n+1):n,t=t<10?"0".concat(t):t,o=o<10?"0".concat(o):o,c=c<10?"0".concat(c):c,"".concat(a,"/").concat(n,"/").concat(t," ").concat(o,":").concat(c)}(new Date(e.volumeInfo.publishedDate)));var b={authors:l,publisher:a,date:d,title:s,categories:j,image:null===i||void 0===i?void 0:i.thumbnail,id:e.id};return Object(r.jsx)(V,Object(H.a)({},b),e.id)}))})}),Object(r.jsx)(Z,{})]})}function ee(){var e=Object(w.c)((function(e){return e.books})),t=e.items,n=e.totalItems;return e.isLoading?Object(r.jsx)(y,{}):0===t.length?Object(r.jsx)("section",{className:"container booksContainer",children:Object(r.jsx)("h2",{children:"Fai la tua prima ricerca"})}):Object(r.jsxs)("section",{className:"container booksContainer",children:[Object(r.jsxs)("h2",{children:["La tua ricerca ha prodotto ",n," risultati"]}),Object(r.jsx)($,{books:t})]})}function te(){return Object(r.jsxs)("main",{children:[Object(r.jsx)(K,{}),Object(r.jsx)(ee,{})]})}var ne=function(e){Object(P.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(D.a)(this,n),(o=t.call(this,e)).state={books:[],isLoading:!1},o}return Object(_.a)(n,[{key:"render",value:function(){return this.state.isLoading?Object(r.jsx)(y,{}):Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(f,{destination:"/"}),Object(r.jsxs)("article",{className:"container",children:[Object(r.jsx)("header",{children:Object(r.jsx)("h1",{children:"Libri salvati"})}),Object(r.jsx)("section",{className:"container",children:Object(r.jsx)(L,{children:Object(r.jsx)(E.Consumer,{children:function(e){var t=e.books;return 0===t.length?Object(r.jsx)("h2",{children:"Nessun libro salvato"}):t.map((function(e){return Object(r.jsx)("article",{className:"relative-parent",children:Object(r.jsx)(M,{id:e.id,drawGoBack:!1,drawDeleteButton:!0})},e.id)}))}})})})]})]})}}]),n}(o.Component);function oe(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(x.c,{children:[Object(r.jsx)(x.a,{path:"/",component:te,exact:!0}),Object(r.jsx)(x.a,{path:"/book/:id",exact:!0,children:Object(r.jsx)(M,{drawGoBack:!0})}),Object(r.jsx)(x.a,{path:"/books/saved",component:ne,exact:!0}),Object(r.jsx)(x.a,{component:F})]})})}var ce=[{id:1,displayName:"Home",url:"/"},{id:2,displayName:"Saved",url:"/books/saved"}];function ae(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h,{items:ce}),Object(r.jsx)(p,{children:Object(r.jsx)(O.Consumer,{children:function(e){return e.showPopup?Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(oe,{}),Object(r.jsx)(m,{})]}):Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(oe,{})})}})})]})}var se=n(14),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{q:"",isError:!1,showedItems:0,lastUrlCalled:""},t=arguments.length>1?arguments[1]:void 0;return"SET_Q"===t.type?Object(H.a)(Object(H.a)({},e),{},{q:t.payload,isError:!1}):"CLEAR_Q"===t.type?Object(H.a)(Object(H.a)({},e),{},{q:"",isError:!1}):"THROW_SEARCH_ERROR"===t.type?Object(H.a)(Object(H.a)({},e),{},{isError:!0}):"SET_LAST_URL_CALLED"===t.type?Object(H.a)(Object(H.a)({},e),{},{lastUrlCalled:t.payload.url}):"SET_NUM_ITEMS_DISPLAYED"===t.type?Object(H.a)(Object(H.a)({},e),{},{showedItems:t.payload.count}):e},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],totalItems:0,isLoading:!1,orderBy:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(H.a)(Object(H.a)({},e),{},{items:t.payload.items,totalItems:t.payload.totalItems,isLoading:!1});case"SET_LOADING":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!0});case"SET_ORDERBY":return Object(H.a)(Object(H.a)({},e),{},{orderBy:t.payload});case"STOP_LOADING":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!1});case"UPDATE_BOOKS":return Object(H.a)(Object(H.a)({},e),{},{items:[].concat(Object(z.a)(e.items),Object(z.a)(t.payload)),isLoading:!1});default:return e}},le=Object(se.a)({search:ie,books:re}),je=n(44),de=n(32),be=n(45),ue={key:"root",storage:n.n(be).a},he=Object(de.a)(ue,le),Oe=Object(se.b)(he),pe=Object(de.b)(Oe);s.a.render(Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(w.a,{store:Oe,children:Object(r.jsx)(je.a,{loading:null,persistor:pe,children:Object(r.jsx)(j.a,{children:Object(r.jsx)(ae,{})})})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.48896107.chunk.js.map